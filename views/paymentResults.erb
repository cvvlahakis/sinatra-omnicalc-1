
    <h1>
  Payment Results
</h1>

<dl>
  <dt>
    APR
  </dt>
  <dd>
    <%= params["user_apr"].to_f.to_fs(:percentage, { :precision => 4 } )%>
  </dd>

  <dt>
    Number of years
  </dt>
  <dd>
    <%= params["user_years"].to_i %>
  </dd>

  <dt>
    Principal
  </dt>
  <dd>
    <%= params["user_pv"].to_f.to_fs(:currency) %>
  </dd>

  <dt>
    Payment
  </dt>
  <dd>
    <% r = params["user_apr"].to_f / 100 / 12 %>
    <% numerator = r * params["user_pv"].to_f %>
    <% n = params["user_years"].to_i * 12 %>
    <% denominator = 1 - ((1 + r)**(n * -1)) %>
    <%= (numerator / denominator).to_f.to_fs(:currency) %>
  </dd>
</dl>
<a href="/payment/new">
  Calculate another payment
</a>
